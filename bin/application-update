#!/usr/bin/env ruby

# Reads the .apidoc file in the current directory, downloading the
# latest code from apidoc to the specified locations.
#
# PROFILE=xxx application-update --path <path>
#   path: defaults to .apidoc
#

load File.join(File.dirname(__FILE__), 'apidoc-cli-config')

args = ApidocCli::Args.parse(ARGV.join(" "))

path = File.expand_path(args[:path] || ApidocCli::AppConfig::DEFAULT_FILENAME)

if !File.exists?(path)
  puts "File #{path} does not exit"
  exit(1)
else
  config = ApidocCli::AppConfig.new(:path => path)
  config.projects.each do |project|
    puts "project: #{project.name}"
    project.each_generator do |generator, target|
      puts " -- generator[#{generator}] => #{target}"
    end
  end
end
